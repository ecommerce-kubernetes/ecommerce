version: "3.8"

services:
  product-service-blue:
    image: minsik2434/product-service:latest
    container_name: product-service-blue
    restart: always
    stop_grace_period: 35s
    networks:
      - buynest-network
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - SPRING_CONFIG_IMPORT=optional:configserver:http://config-service:8888
    env_file:
      - .env

  product-service-green:
    image: minsik2434/product-service:latest
    container_name: product-service-green
    restart: always
    stop_grace_period: 35s
    networks:
      - buynest-network
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - SPRING_CONFIG_IMPORT=optional:configserver:http://config-service:8888
    env_file:
      - .env

networks:
  buynest-network:
    external: true
